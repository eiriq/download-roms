

<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roots - Moto G34</title>
  <link rel="icon" type="image/png" href="icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root {
      --md-sys-color-primary: #4CAF50;           
      --md-sys-color-on-primary: #FFFFFF;       
      --md-sys-color-primary-container: #E8F5E9;
      --md-sys-color-on-primary-container: #1B5E20;
      --md-sys-color-secondary: #505A6E;
      --md-sys-color-on-secondary: #FFFFFF;
      --md-sys-color-secondary-container: #D8E2F0;
      --md-sys-color-on-secondary-container: #0C1525;
      --md-sys-color-tertiary: #64577A;
      --md-sys-color-on-tertiary: #FFFFFF;
      --md-sys-color-tertiary-container: #EBDFF7;
      --md-sys-color-on-tertiary-container: #20102D;
      --md-sys-color-error: #BA1A1A;
      --md-sys-color-error-container: #FFDAD6;
      --md-sys-color-on-error: #FFFFFF;
      --md-sys-color-on-error-container: #410002;
      --md-sys-color-background: #FFFBFE;
      --md-sys-color-on-background: #1C1B1F;
      --md-sys-color-surface: #FFFBFE;
      --md-sys-color-on-surface: #1C1B1F;
      --md-sys-color-surface-variant: #E7E0EC;
      --md-sys-color-on-surface-variant: #49454F;
      --md-sys-color-outline: #79747E;
      --md-sys-color-inverse-on-surface: #F4EFF4;
      --md-sys-color-inverse-surface: #313033;
      --md-sys-color-inverse-primary: #B3CDF5;
      --md-sys-color-shadow: rgba(0, 0, 0, 0.2);
      --md-sys-color-surface-tint: #4CAF50;
      --md-sys-color-outline-variant: #CAC4D0;
      
      --md-sys-elevation-level0: none;
      --md-sys-elevation-level1: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
      --md-sys-elevation-level2: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
      --md-sys-elevation-level3: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
      --md-sys-elevation-level4: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
      --md-sys-elevation-level5: 0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22);
    }

    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--md-sys-color-surface-variant);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--md-sys-color-primary);
      border-radius: 10px;
      transition: background 0.2s ease;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--md-sys-color-primary);
      opacity: 0.8;
    }

    * {
      scrollbar-width: thin;
      scrollbar-color: var(--md-sys-color-primary) var(--md-sys-color-surface-variant);
      scrollbar-border-radius: 10px;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--md-sys-color-background);
      color: var(--md-sys-color-on-background);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
    }

    body::before {
      content: '';
      display: block;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: -1;
      pointer-events: none;
    }

    [data-theme="dark"] {
      --md-sys-color-primary: #81C784;           
      --md-sys-color-on-primary: #1B5E20;       
      --md-sys-color-primary-container: #2E7D32;
      --md-sys-color-on-primary-container: #E8F5E9;
      --md-sys-color-secondary: #C2C7D9;
      --md-sys-color-on-secondary: #262A3A;
      --md-sys-color-secondary-container: #3D4254;
      --md-sys-color-on-secondary-container: #D8E2F0;
      --md-sys-color-tertiary: #D0BCFF;
      --md-sys-color-on-tertiary: #352A48;
      --md-sys-color-tertiary-container: #4D4162;
      --md-sys-color-on-tertiary-container: #EBDFF7;
      --md-sys-color-error: #F2B8B5;
      --md-sys-color-error-container: #93000A;
      --md-sys-color-on-error: #601410;
      --md-sys-color-on-error-container: #FFDAD6;
      --md-sys-color-background: #1C1B1F;
      --md-sys-color-on-background: #E6E1E5;
      --md-sys-color-surface: #1C1B1F;
      --md-sys-color-on-surface: #E6E1E5;
      --md-sys-color-surface-variant: #49454F;
      --md-sys-color-on-surface-variant: #CAC4CF;
      --md-sys-color-outline: #938F99;
      --md-sys-color-inverse-on-surface: #1C1B1F;
      --md-sys-color-inverse-surface: #E6E1E5;
      --md-sys-color-inverse-primary: #4CAF50;
      --md-sys-color-shadow: rgba(0, 0, 0, 0.3);
      --md-sys-color-surface-tint: #81C784;
      --md-sys-color-outline-variant: #49454F;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        transform: translateY(10px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInCard {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      60% {
        opacity: 0.8;
        transform: translateY(-5px) scale(1.02);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes slideOutCard {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      40% {
        opacity: 0.8;
        transform: translateY(-5px) scale(1.02);
      }
      100% {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
    }

    @keyframes fadeInTopBar {
      from {
        opacity: 0;
        transform: scaleX(0);
      }
      to {
        opacity: 1;
        transform: scaleX(1);
      }
    }

    @keyframes fadeOutTopBar {
      from {
        opacity: 1;
        transform: scaleX(1);
      }
      to {
        opacity: 0;
        transform: scaleX(0);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideOutLeft {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(-20px);
      }
    }

    @keyframes slideDown {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(10px);
      }
    }

    @keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(76, 175, 80, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
  }
}

@keyframes shake {
  0%, 100% { transform: rotate(0deg); }
  10% { transform: rotate(-10deg); }
  20% { transform: rotate(10deg); }
  30% { transform: rotate(-10deg); }
  40% { transform: rotate(10deg); }
  50% { transform: rotate(-10deg); }
  60% { transform: rotate(10deg); }
  70% { transform: rotate(-10deg); }
  80% { transform: rotate(10deg); }
  90% { transform: rotate(-10deg); }
}

@keyframes ring {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(15deg); }
  50% { transform: rotate(0deg); }
  75% { transform: rotate(-15deg); }
  100% { transform: rotate(0deg); }
}

@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes heartBeat {
  0% { transform: scale(1); }
  25% { transform: scale(1.2); }
  50% { transform: scale(1); }
  75% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.fade-in-up {
  animation: fadeInUp 0.5s ease forwards;
}

.fade-in {
  animation: fadeIn 0.3s ease forwards;
}

.slide-up {
  animation: slideUp 0.4s ease forwards;
}

.background-shapes {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  overflow: hidden;
  pointer-events: none;
}

.shape {
  position: absolute;
  border-radius: 50%;
  opacity: 0.1;
  animation: float 20s infinite ease-in-out;
}

.shape:nth-child(1) {
  width: 200px;
  height: 200px;
  background: var(--md-sys-color-primary);
  top: 10%;
  left: 10%;
  animation-duration: 30s;
}

.shape:nth-child(2) {
  width: 150px;
  height: 150px;
  background: var(--md-sys-color-tertiary);
  top: 70%;
  left: 80%;
  animation-duration: 25s;
  animation-delay: 2s;
}

.shape:nth-child(3) {
  width: 100px;
  height: 100px;
  background: var(--md-sys-color-secondary);
  top: 40%;
  left: 70%;
  animation-duration: 35s;
  animation-delay: 5s;
}

.shape:nth-child(4) {
  width: 250px;
  height: 250px;
  background: var(--md-sys-color-primary-container);
  top: 60%;
  left: 20%;
  animation-duration: 40s;
  animation-delay: 1s;
}

.shape:nth-child(5) {
  width: 120px;
  height: 120px;
  background: var(--md-sys-color-tertiary-container);
  top: 20%;
  left: 60%;
  animation-duration: 28s;
  animation-delay: 3s;
}

.shape:nth-child(6) {
  width: 180px;
  height: 180px;
  background: var(--md-sys-color-secondary-container);
  top: 80%;
  left: 40%;
  animation-duration: 32s;
  animation-delay: 4s;
}

.spiral {
  position: absolute;
  width: 300px;
  height: 300px;
  border: 4px solid var(--md-sys-color-outline);
  border-radius: 50%;
  opacity: 0.05;
  animation: rotate 40s linear infinite;
}

.spiral:nth-child(7) {
  top: 15%;
  left: 15%;
  width: 200px;
  height: 200px;
  animation-duration: 60s;
}

.spiral:nth-child(8) {
  top: 65%;
  left: 65%;
  width: 250px;
  height: 250px;
  animation-duration: 80s;
  animation-direction: reverse;
}

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-20px) rotate(5deg); }
  50% { transform: translateY(0) rotate(0deg); }
  75% { transform: translateY(20px) rotate(-5deg); }
}

@keyframes rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.toolbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background-color: var(--md-sys-color-surface);
  backdrop-filter: blur(10px);
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 100;
  box-shadow: var(--md-sys-elevation-level2);
  height: 64px;
  animation: fadeInDown 0.5s ease;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.logo h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--md-sys-color-primary);
}

.toolbar-actions {
  display: flex;
  gap: 1rem;
}

.icon-button {
  background: none;
  border: none;
  color: var(--md-sys-color-on-surface);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.icon-button:hover {
  background-color: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-primary);
}

.icon-button:active {
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
}

.icon-button .material-icons {
  font-size: 1.2rem;
  z-index: 1;
}

.icon-button.ripple {
  position: relative;
  overflow: hidden;
}

.icon-button.ripple::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.icon-button.ripple:active::before {
  width: 300px;
  height: 300px;
}

[data-theme="dark"] .icon-button:hover {
  background-color: var(--md-sys-color-surface-variant);
  color: var(--md-sys-color-primary);
}

.google-icon {
  font-family: 'Product Sans', 'Roboto', sans-serif;
  font-weight: 700;
  font-size: 1.2rem;
  color: var(--md-sys-color-on-surface);
}

main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 5rem 1rem 2rem;
  max-width: 900px;
  width: 100%;
  margin: 0 auto;
  min-height: calc(100vh - 64px);
}

.rom-list {
  width: 100%;
  display: none;
  margin-top: 2rem;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}

.rom-list.show {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

.rom-list.hiding {
  opacity: 0;
  transform: translateY(20px);
}

.rom-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.rom-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--md-sys-color-primary);
}

.back-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: none;
  border: 1px solid var(--md-sys-color-outline);
  border-radius: 8px;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  transition: all 0.2s ease;
}

.back-button:hover {
  background-color: var(--md-sys-color-surface-variant);
}

.rom-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  gap: 1rem;
  width: 100%;
}

.search-container {
  flex: 1;
  position: relative;
  max-width: 500px;
}

.search-input {
  width: 100%;
  padding: 0.75rem 1rem 0.75rem 3rem;
  border-radius: 24px;
  border: 1px solid var(--md-sys-color-outline);
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  font-size: 1rem;
  transition: all 0.3s ease;
  box-shadow: var(--md-sys-elevation-level1);
}

.search-input:focus {
  outline: none;
  border-color: var(--md-sys-color-primary);
  box-shadow: var(--md-sys-elevation-level2);
}

.search-icon {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--md-sys-color-on-surface-variant);
  pointer-events: none;
}

.search-clear {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  display: none;
}

.search-clear.visible {
  display: block;
}

.filter-dropdown {
  position: relative;
}

.filter-button {
  background-color: var(--md-sys-color-surface-variant);
  border: none;
  border-radius: 8px;
  padding: 0.75rem 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  transition: all 0.2s ease;
}

.filter-button:hover {
  background-color: var(--md-sys-color-outline-variant);
}

.filter-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background-color: var(--md-sys-color-surface);
  border-radius: 8px;
  box-shadow: var(--md-sys-elevation-level3);
  min-width: 200px;
  z-index: 10;
  margin-top: 0.5rem;
  display: none;
  overflow: hidden;
}

.filter-menu.active {
  display: block;
}

.filter-option {
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.filter-option:hover {
  background-color: var(--md-sys-color-surface-variant);
}

.view-toggle {
  display: flex;
  background-color: var(--md-sys-color-surface-variant);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: var(--md-sys-elevation-level1);
}

.view-button {
  background: none;
  border: none;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  transition: all 0.2s ease;
}

.view-button.active {
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
}

.view-button:hover:not(.active) {
  background-color: var(--md-sys-color-outline-variant);
}

.rom-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
  transition: all 0.3s ease;
}

.rom-cards.list-view {
  grid-template-columns: 1fr;
}

.rom-card {
  background-color: var(--md-sys-color-surface);
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: var(--md-sys-elevation-level1);
  transition: all 0.3s ease;
  border: 1px solid var(--md-sys-color-outline-variant);
  position: relative;
  overflow: hidden;
  opacity: 0;
  transform: translateY(20px) scale(0.95);
  animation-duration: 0.5s;
  animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
  animation-fill-mode: forwards;
}

.rom-cards.list-view .rom-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
}

.rom-card.show {
  animation-name: slideInCard;
}

.rom-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--md-sys-color-primary), var(--md-sys-color-tertiary));
  border-radius: 4px 4px 0 0;
  opacity: 0;
  animation: fadeInTopBar 0.8s ease 0.3s forwards;
}

.rom-card:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: var(--md-sys-elevation-level4);
  border-color: var(--md-sys-color-primary);
}

.rom-cards.list-view .rom-card:hover {
  transform: translateY(-2px);
}

.rom-content {
  flex: 1;
}

.rom-cards.list-view .rom-content {
  flex: 1;
}

.rom-name {
  font-size: 1.2rem;
  font-weight: 500;
  color: var(--md-sys-color-on-surface);
  margin-bottom: 0.5rem;
}

.rom-cards.list-view .rom-name {
  font-size: 1.1rem;
  margin-bottom: 0;
}

.rom-version {
  display: inline-block;
  background-color: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-primary);
  padding: 0.2rem 0.6rem;
  border-radius: 50px;
  font-size: 0.8rem;
  font-weight: 500;
  margin-bottom: 0.8rem;
}

.rom-cards.list-view .rom-version {
  display: none;
}

.rom-description {
  font-size: 0.9rem;
  color: var(--md-sys-color-on-surface-variant);
  margin-bottom: 1rem;
  line-height: 1.4;
}

.rom-cards.list-view .rom-description {
  display: none;
}

.rom-details {
  display: flex;
  flex-wrap: wrap;
  gap: 0.8rem;
  margin-bottom: 1.2rem;
}

.rom-cards.list-view .rom-details {
  display: none;
}

.rom-detail {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.8rem;
  color: var(--md-sys-color-on-surface-variant);
}

.rom-detail .material-icons {
  font-size: 0.9rem;
}

.rom-actions {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
}

.rom-cards.list-view .rom-actions {
  margin-top: 0;
}

.favorite-button {
  background: none;
  border: 1px solid var(--md-sys-color-outline);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--md-sys-color-on-surface-variant);
}

.favorite-button:hover {
  background-color: var(--md-sys-color-surface-variant);
  transform: scale(1.1);
}

.favorite-button.active {
  color: var(--md-sys-color-error);
  border-color: var(--md-sys-color-error);
}

.favorite-button.active:hover {
  background-color: rgba(186, 26, 26, 0.1);
}

.favorite-button .material-icons {
  font-size: 1.2rem;
}

.download-button {
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border: none;
  border-radius: 16px;
  padding: 0.8rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
  box-shadow: var(--md-sys-elevation-level2);
  width: 100%;
  position: relative;
  overflow: hidden;
}

.rom-cards.list-view .download-button {
  width: auto;
  padding: 0.6rem 1.2rem;
  font-size: 0.9rem;
}

.download-button:hover {
  background-color: #388E3C;
  transform: translateY(-2px);
  box-shadow: var(--md-sys-elevation-level3);
}

.download-button:active {
  transform: translateY(0);
  box-shadow: var(--md-sys-elevation-level1);
}

.download-button .ripple {
  position: absolute;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.7);
  transform: scale(0);
  animation: ripple 0.6s linear;
}

.loading {
  display: none;
  text-align: center;
  padding: 2rem;
  opacity: 0;
  transform: translateY(20px);
}

.loading.show {
  display: block;
  opacity: 1;
  transform: translateY(0);
  animation: fadeIn 0.5s ease;
}

.loading .material-icons {
  font-size: 2rem;
  color: var(--md-sys-color-primary);
  animation: spin 1.5s linear infinite;
}

.no-results {
  text-align: center;
  padding: 2rem;
  color: var(--md-sys-color-on-surface-variant);
}

.no-results .material-icons {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: var(--md-sys-color-primary);
}

.no-results h3 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: var(--md-sys-color-on-surface);
}

.favorites-section {
  display: none;
  width: 100%;
  margin-top: 2rem;
}

.favorites-section.show {
  display: block;
}

.favorites-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.favorites-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--md-sys-color-primary);
}

.favorites-empty {
  text-align: center;
  padding: 3rem;
  color: var(--md-sys-color-on-surface-variant);
}

.favorites-empty .material-icons {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: var(--md-sys-color-primary);
}

.favorites-empty h3 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: var(--md-sys-color-on-surface);
}

.tutorial-button {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border: none;
  border-radius: 16px;
  padding: 0.8rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
  box-shadow: var(--md-sys-elevation-level3);
  z-index: 99;
}

.tutorial-button:hover {
  background-color: #388E3C;
  transform: translateY(-2px);
  box-shadow: var(--md-sys-elevation-level4);
}

.tutorial-button:active {
  transform: translateY(0);
  box-shadow: var(--md-sys-elevation-level2);
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

.modal {
  background-color: var(--md-sys-color-surface);
  border-radius: 24px;
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow: hidden;
  box-shadow: var(--md-sys-elevation-level5);
  transform: scale(0.9);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
}

.modal-overlay.active .modal {
  transform: scale(1);
}

.modal-header {
  padding: 1.5rem;
  border-bottom: 1px solid var(--md-sys-color-outline-variant);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--md-sys-color-on-surface);
}

.modal-close {
  background: none;
  border: none;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  transition: background-color 0.2s ease;
}

.modal-close:hover {
  background-color: var(--md-sys-color-surface-variant);
}

.modal-body {
  padding: 1.5rem;
  overflow-y: auto;
  flex: 1;
}

.modal-tabs {
  display: flex;
  border-bottom: 1px solid var(--md-sys-color-outline-variant);
  margin-bottom: 1.5rem;
}

.modal-tab {
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}

.modal-tab.active {
  color: var(--md-sys-color-primary);
  border-bottom-color: var(--md-sys-color-primary);
}

.modal-tab-content {
  display: none;
}

.modal-tab-content.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

.modal-section {
  margin-bottom: 1.5rem;
  background-color: var(--md-sys-color-surface);
  border-radius: 16px;
  padding: 1.25rem;
  border: 1px solid var(--md-sys-color-outline-variant);
  box-shadow: var(--md-sys-elevation-level1);
  transition: all 0.3s ease;
}

.modal-section:hover {
  box-shadow: var(--md-sys-elevation-level3);
  transform: translateY(-2px);
}

.modal-section-title {
  font-size: 1.1rem;
  font-weight: 500;
  color: var(--md-sys-color-on-surface);
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.modal-section-title .material-icons {
  font-size: 1.2rem;
  color: var(--md-sys-color-primary);
}

.modal-list {
  list-style: none;
  padding-left: 1.5rem;
  margin: 0.5rem 0;
}

.modal-list li {
  position: relative;
  padding-left: 1rem;
  margin-bottom: 0.5rem;
  color: var(--md-sys-color-on-surface-variant);
}

.modal-list li::before {
  content: '•';
  position: absolute;
  left: 0;
  color: var(--md-sys-color-primary);
}

.modal-footer {
  padding: 1.5rem;
  border-top: 1px solid var(--md-sys-color-outline-variant);
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
}

.modal-button {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
  overflow: hidden;
}

.modal-button .ripple {
  position: absolute;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.7);
  transform: scale(0);
  animation: ripple 0.6s linear;
}

.modal-button-secondary {
  background-color: var(--md-sys-color-surface-variant);
  color: var(--md-sys-color-on-surface-variant);
}

.modal-button-secondary:hover {
  background-color: var(--md-sys-color-outline-variant);
}

.modal-button-primary {
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
}

.modal-button-primary:hover {
  background-color: #388E3C;
}

.telegram-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #0088cc;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
}

.telegram-button:hover {
  background-color: #0077b3;
  transform: translateY(-2px);
}

.telegram-button .material-icons {
  font-size: 1.2rem;
}

.info-card {
  background-color: var(--md-sys-color-primary-container);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1rem;
  border-left: 4px solid var(--md-sys-color-primary);
}

.info-card-title {
  font-weight: 500;
  color: var(--md-sys-color-primary);
  margin-bottom: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.info-card-title .material-icons {
  font-size: 1rem;
}

.info-card-content {
  color: var(--md-sys-color-on-primary-container);
}

.info-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.info-card-description {
  background-color: var(--md-sys-color-surface-variant);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1rem;
  border-left: 4px solid var(--md-sys-color-secondary);
}

.info-card-description-title {
  font-weight: 500;
  color: var(--md-sys-color-on-surface);
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.info-card-description-content {
  color: var(--md-sys-color-on-surface-variant);
  line-height: 1.5;
}

.notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: var(--md-sys-color-surface);
  border-radius: 8px;
  box-shadow: var(--md-sys-elevation-level4);
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  z-index: 500;
  transform: translateY(100px);
  opacity: 0;
  transition: all 0.3s ease;
  max-width: 350px;
}

.notification.show {
  transform: translateY(0);
  opacity: 1;
}

.notification-icon {
  color: var(--md-sys-color-primary);
  font-size: 1.5rem;
}

.notification-content {
  flex: 1;
}

.notification-title {
  font-weight: 500;
  margin-bottom: 0.2rem;
}

.notification-message {
  font-size: 0.9rem;
  color: var(--md-sys-color-on-surface-variant);
}

.notification-close {
  background: none;
  border: none;
  color: var(--md-sys-color-on-surface-variant);
  cursor: pointer;
}

@media (max-width: 768px) {
  .rom-cards {
    grid-template-columns: 1fr;
  }
  
  .rom-controls {
    flex-direction: column;
  }
  
  .search-container {
    max-width: 100%;
  }
  
  .info-grid {
    grid-template-columns: 1fr;
  }
  
  .modal {
    max-width: 100%;
    border-radius: 16px;
  }
  
  .modal-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .modal-section {
    padding: 0.75rem;
  }
  
  .tutorial-button {
    bottom: 10px;
    left: 10px;
    padding: 0.6rem 1rem;
    font-size: 0.9rem;
  }
}
  </style>
</head>
<body>
  <div class="background-shapes">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="spiral"></div>
    <div class="spiral"></div>
  </div>

  <div class="toolbar">
    <div class="logo">
      <span class="material-icons">security</span>
      <h1>Roots</h1>
    </div>
    <div class="toolbar-actions">
      <button class="icon-button" id="romsButton" aria-label="ROMs" title="ROMs">
        <span class="material-icons">android</span>
      </button>
      <button class="icon-button" id="recoverysButton" aria-label="Recoverys" title="Recoverys">
        <span class="material-icons">settings_backup_restore</span>
      </button>
      <button class="icon-button" id="gappsButton" aria-label="GApps" title="GApps">
        <span class="google-icon">G</span>
      </button>
      <button class="icon-button" id="themeToggle" aria-label="Alternar tema">
        <span class="material-icons">dark_mode</span>
      </button>
    </div>
  </div>

  <main>
    <div class="rom-list" id="romList">
      <div class="rom-header">
        <h2 class="rom-title" id="romTitle">Roots para Moto G34</h2>
        <button class="back-button" id="backButton">
          <span class="material-icons">arrow_back</span>
          Voltar
        </button>
      </div>
      
      <div class="rom-controls">
        <div class="search-container">
          <span class="material-icons search-icon">search</span>
          <input type="text" class="search-input" id="searchInput" placeholder="Buscar Roots...">
          <span class="material-icons search-clear" id="searchClear">clear</span>
        </div>
        
        <div class="filter-dropdown">
          <button class="filter-button" id="filterButton">
            <span class="material-icons">filter_list</span>
            Filtrar
          </button>
          <div class="filter-menu" id="filterMenu">
            <div class="filter-option" data-filter="all">
              <span class="material-icons">apps</span>
              Todos os Roots
            </div>
            <div class="filter-option" data-filter="favorites">
              <span class="material-icons">favorite</span>
              Favoritos
            </div>
            <div class="filter-option" data-filter="developer">
              <span class="material-icons">person</span>
              Por Desenvolvedor
            </div>
            <div class="filter-option" data-filter="date">
              <span class="material-icons">calendar_today</span>
              Por Data
            </div>
          </div>
        </div>
        
        <div class="view-toggle">
          <button class="view-button active" id="gridViewButton" title="Visualização em grade">
            <span class="material-icons">grid_view</span>
          </button>
          <button class="view-button" id="listViewButton" title="Visualização em lista">
            <span class="material-icons">view_list</span>
          </button>
        </div>
      </div>
      
      <div class="loading" id="loading">
        <span class="material-icons">refresh</span>
        <p>Carregando Roots...</p>
      </div>
      
      <div class="rom-cards" id="romCards">
        <!-- Os Roots serão carregados dinamicamente aqui -->
      </div>
    </div>

    <div class="favorites-section" id="favoritesSection">
      <div class="favorites-header">
        <h2 class="favorites-title">Meus Roots Favoritos</h2>
        <button class="back-button" id="backFromFavorites">
          <span class="material-icons">arrow_back</span>
          Voltar
        </button>
      </div>
      
      <div class="loading" id="favoritesLoading">
        <span class="material-icons">refresh</span>
        <p>Carregando favoritos...</p>
      </div>
      
      <div class="rom-cards" id="favoritesCards">
        <!-- Os favoritos serão carregados dinamicamente aqui -->
      </div>
      
      <div class="favorites-empty" id="favoritesEmpty">
        <span class="material-icons">favorite_border</span>
        <h3>Nenhum Root favoritado</h3>
        <p>Clique no ícone de coração em qualquer Root para adicioná-lo aos favoritos.</p>
      </div>
    </div>
  </main>

  <button class="tutorial-button" id="tutorialButton">
    <span class="material-icons">help_outline</span>
    Como fazer Root?
  </button>

  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Informações do Root</h3>
        <button class="modal-close" id="modalClose">
          <span class="material-icons">close</span>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="modal-tabs" id="modalTabs">
          <div class="modal-tab active" data-tab="details">Detalhes</div>
          <div class="modal-tab" data-tab="source">Fonte</div>
        </div>
        
        <div class="modal-tab-content active" id="details-tab">
          <div class="info-grid">
            <div class="info-card">
              <div class="info-card-title">
                <span class="material-icons">security</span>
                Versão
              </div>
              <div class="info-card-content" id="romVersion">
                <!-- Versão do Root será inserida aqui -->
              </div>
            </div>
            
            <div class="info-card">
              <div class="info-card-title">
                <span class="material-icons">person</span>
                Desenvolvedor
              </div>
              <div class="info-card-content" id="romDeveloper">
                <!-- Desenvolvedor do Root será inserido aqui -->
              </div>
            </div>
            
            <div class="info-card">
              <div class="info-card-title">
                <span class="material-icons">update</span>
                Última Atualização
              </div>
              <div class="info-card-content" id="romLastUpdate">
                <!-- Última atualização do Root será inserida aqui -->
              </div>
            </div>
          </div>
          
          <div class="info-card-description">
            <div class="info-card-description-title">
              <span class="material-icons">description</span>
              Descrição
            </div>
            <div class="info-card-description-content" id="romDescription">
              <!-- Descrição do Root será inserida aqui -->
            </div>
          </div>
          
          <div class="modal-section" id="changelogSection">
            <h4 class="modal-section-title">
              <span class="material-icons">history</span>
              Registro de Mudanças
            </h4>
            <ul class="modal-list" id="changelog">
              <!-- Changelog será inserido aqui -->
            </ul>
          </div>
          
          <div class="modal-section" id="knownIssuesSection">
            <h4 class="modal-section-title">
              <span class="material-icons">error_outline</span>
              Problemas Conhecidos
            </h4>
            <ul class="modal-list" id="knownIssues">
              <!-- Problemas conhecidos serão inseridos aqui -->
            </ul>
          </div>
          
          <div class="modal-section" id="notesSection">
            <h4 class="modal-section-title">
              <span class="material-icons">sticky_note_2</span>
              Notas
            </h4>
            <ul class="modal-list" id="notes">
              <!-- Notas serão inseridas aqui -->
            </ul>
          </div>
        </div>
        
        <div class="modal-tab-content" id="source-tab">
          <div class="modal-section">
            <h4 class="modal-section-title">
              <span class="material-icons">link</span>
              Fonte do Root
            </h4>
            <div id="sourceLink">
              <!-- Link da fonte será inserido aqui -->
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="modal-button modal-button-secondary" id="cancelButton">
          <span class="material-icons">close</span>
          Cancelar
        </button>
        <button class="modal-button modal-button-primary" id="confirmButton">
          <span class="material-icons">download</span>
          Baixar Root
        </button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="tutorialModalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Como Fazer Root</h3>
        <button class="modal-close" id="tutorialModalClose">
          <span class="material-icons">close</span>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="modal-section">
          <h4 class="modal-section-title">
            <span class="material-icons">warning</span>
            Aviso Importante
          </h4>
          <p>Fazer root no seu dispositivo pode anular a garantia e pode causar instabilidade no sistema. Não somos responsáveis por quaisquer danos causados ao seu dispositivo. Prossiga com cuidado e sempre faça backup dos seus dados importantes antes de prosseguir.</p>
        </div>
        
        <div class="modal-section">
          <h4 class="modal-section-title">
            <span class="material-icons">list_alt</span>
            Pré-requisitos
          </h4>
          <ul class="modal-list">
            <li>Bootloader desbloqueado</li>
            <li>Bateria com pelo menos 50% de carga</li>
            <li>Faça backup dos seus dados importantes</li>
            <li>Ative a opção "Depuração USB" nas opções do desenvolvedor</li>
          </ul>
        </div>
        
        <div class="modal-section">
          <h4 class="modal-section-title">
            <span class="material-icons">build</span>
            Instruções de Instalação
          </h4>
          <ol class="modal-list" style="list-style-type: decimal;">
            <li>Baixe a solução de root desejada</li>
            <li>Se necessário, instale um recovery personalizado (como TWRP)</li>
            <li>Transfira o arquivo do root para o seu dispositivo</li>
            <li>Reinicie no modo recovery</li>
            <li>Instale o arquivo do root através do recovery</li>
            <li>Reinicie o dispositivo</li>
            <li>Verifique se o root foi aplicado corretamente usando um aplicativo como o Root Checker</li>
          </ol>
        </div>
        
        <div class="modal-section">
          <h4 class="modal-section-title">
            <span class="material-icons">help_outline</span>
            Solução de Problemas
          </h4>
          <ul class="modal-list">
            <li>Se o dispositivo não iniciar após o root, tente reinstalar o recovery</li>
            <li>Se encontrar erros durante a instalação, verifique se o arquivo foi baixado corretamente</li>
            <li>Para problemas específicos, consulte a fonte do root para obter suporte</li>
          </ul>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="modal-button modal-button-primary" id="tutorialModalConfirm">
          <span class="material-icons">check</span>
          Entendido
        </button>
      </div>
    </div>
  </div>

  <div class="notification" id="notification">
    <span class="material-icons notification-icon">check_circle</span>
    <div class="notification-content">
      <div class="notification-title">Sucesso</div>
      <div class="notification-message">Operação concluída com sucesso!</div>
    </div>
    <button class="notification-close">
      <span class="material-icons">close</span>
    </button>
  </div>

  <script src="roots-data.js"></script>
  
  <script>
    const romList = document.getElementById('romList');
    const romCards = document.getElementById('romCards');
    const favoritesSection = document.getElementById('favoritesSection');
    const favoritesCards = document.getElementById('favoritesCards');
    const favoritesEmpty = document.getElementById('favoritesEmpty');
    const favoritesLoading = document.getElementById('favoritesLoading');
    const loading = document.getElementById('loading');
    const backButton = document.getElementById('backButton');
    const backFromFavorites = document.getElementById('backFromFavorites');
    const themeToggle = document.getElementById('themeToggle');
    const romsButton = document.getElementById('romsButton');
    const recoverysButton = document.getElementById('recoverysButton');
    const gappsButton = document.getElementById('gappsButton');
    const notification = document.getElementById('notification');
    const tutorialButton = document.getElementById('tutorialButton');
    const searchInput = document.getElementById('searchInput');
    const searchClear = document.getElementById('searchClear');
    const gridViewButton = document.getElementById('gridViewButton');
    const listViewButton = document.getElementById('listViewButton');
    const filterButton = document.getElementById('filterButton');
    const filterMenu = document.getElementById('filterMenu');
    
    const modalOverlay = document.getElementById('modalOverlay');
    const modalClose = document.getElementById('modalClose');
    const modalTitle = document.getElementById('modalTitle');
    const modalTabs = document.querySelectorAll('.modal-tab');
    const modalTabContents = document.querySelectorAll('.modal-tab-content');
    const cancelButton = document.getElementById('cancelButton');
    const confirmButton = document.getElementById('confirmButton');
    
    const tutorialModalOverlay = document.getElementById('tutorialModalOverlay');
    const tutorialModalClose = document.getElementById('tutorialModalClose');
    const tutorialModalConfirm = document.getElementById('tutorialModalConfirm');
    
    let settings = {
      theme: 'light',
      primaryColor: '#4CAF50',
      animationsEnabled: true,
      notificationsEnabled: true,
      viewMode: 'grid',
      lastUpdateSeen: null
    };

    let currentRom = null;
    let allRoms = [];
    let favorites = [];
    let currentFilter = 'all';
    let currentDevice = '';

    function initializeApp() {
      loadSettings();
      loadFavorites();
      setupEventListeners();
      
      const urlParams = new URLSearchParams(window.location.search);
      currentDevice = urlParams.get('device') || 'motog34';
      
      document.getElementById('romTitle').textContent = `Roots para ${currentDevice.charAt(0).toUpperCase() + currentDevice.slice(1)}`;
      
      loadRoots();
    }

    function setupEventListeners() {
      backButton.addEventListener('click', function() {
        window.location.href = 'index.html';
      });

      backFromFavorites.addEventListener('click', function() {
        showRomList();
      });

      themeToggle.addEventListener('click', toggleTheme);

      romsButton.addEventListener('click', function() {
        window.location.href = `roms.html?device=${currentDevice}`;
      });

      recoverysButton.addEventListener('click', function() {
        window.location.href = `recovery.html?device=${currentDevice}`;
      });

      gappsButton.addEventListener('click', function() {
        window.location.href = `gapps.html?device=${currentDevice}`;
      });

      tutorialButton.addEventListener('click', function() {
        tutorialModalOverlay.classList.add('active');
      });

      searchInput.addEventListener('input', function() {
        const value = this.value;
        if (value) {
          searchClear.classList.add('visible');
        } else {
          searchClear.classList.remove('visible');
        }
        filterRoms(value);
      });

      searchClear.addEventListener('click', function() {
        searchInput.value = '';
        searchClear.classList.remove('visible');
        filterRoms('');
      });

      filterButton.addEventListener('click', function() {
        filterMenu.classList.toggle('active');
      });

      document.querySelectorAll('.filter-option').forEach(option => {
        option.addEventListener('click', function() {
          const filter = this.getAttribute('data-filter');
          applyFilter(filter);
          filterMenu.classList.remove('active');
        });
      });

      gridViewButton.addEventListener('click', function() {
        setViewMode('grid');
      });

      listViewButton.addEventListener('click', function() {
        setViewMode('list');
      });

      notification.querySelector('.notification-close').addEventListener('click', function() {
        notification.classList.remove('show');
      });

      modalClose.addEventListener('click', closeModal);
      cancelButton.addEventListener('click', closeModal);
      confirmButton.addEventListener('click', confirmDownload);
      
      modalTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          switchTab(tabName);
        });
      });
      
      tutorialModalClose.addEventListener('click', function() {
        tutorialModalOverlay.classList.remove('active');
      });
      
      tutorialModalConfirm.addEventListener('click', function() {
        tutorialModalOverlay.classList.remove('active');
      });
      
      modalOverlay.addEventListener('click', function(e) {
        if (e.target === modalOverlay) {
          closeModal();
        }
      });
      
      tutorialModalOverlay.addEventListener('click', function(e) {
        if (e.target === tutorialModalOverlay) {
          tutorialModalOverlay.classList.remove('active');
        }
      });

      document.querySelectorAll('.icon-button, .modal-button, .download-button').forEach(button => {
        button.addEventListener('click', function(e) {
          const ripple = document.createElement('span');
          ripple.classList.add('ripple');
          
          const rect = this.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;
          
          ripple.style.width = ripple.style.height = size + 'px';
          ripple.style.left = x + 'px';
          ripple.style.top = y + 'px';
          
          this.appendChild(ripple);
          
          setTimeout(() => {
            ripple.remove();
          }, 600);
        });
      });

      document.addEventListener('click', function(e) {
        if (!filterButton.contains(e.target) && !filterMenu.contains(e.target)) {
          filterMenu.classList.remove('active');
        }
      });
    }

    function loadRoots() {
      loading.classList.add('show');
      romCards.innerHTML = '';
      
      setTimeout(() => {
        loading.classList.remove('show');
        
        allRoms = getRootsByDevice(currentDevice);
        
        if (allRoms.length === 0) {
          romCards.innerHTML = `
            <div class="no-results">
              <span class="material-icons">search_off</span>
              <h3>Nenhum Root encontrado</h3>
              <p>Não há Roots disponíveis para este dispositivo no momento.</p>
            </div>
          `;
        } else {
          applyFilter(currentFilter);
        }
        
        setTimeout(() => {
          romList.classList.add('show');
        }, 100);
      }, 300);
    }

    function showFavorites() {
      romList.style.display = 'none';
      favoritesSection.style.display = 'block';
      tutorialButton.style.display = 'none';
      
      favoritesLoading.classList.add('show');
      favoritesCards.innerHTML = '';
      favoritesEmpty.style.display = 'none';
      
      setTimeout(() => {
        favoritesLoading.classList.remove('show');
        
        if (favorites.length === 0) {
          favoritesEmpty.style.display = 'block';
        } else {
          displayRoms(favorites, favoritesCards);
        }
        
        setTimeout(() => {
          favoritesSection.classList.add('show');
        }, 100);
      }, 300);
    }

    function showRomList() {
      favoritesSection.classList.remove('show');
      romList.style.display = 'block';
      tutorialButton.style.display = 'flex';
    }

    function displayRoms(roms, container = romCards) {
      container.innerHTML = '';
      
      if (roms.length === 0) {
        container.innerHTML = `
          <div class="no-results">
            <span class="material-icons">search_off</span>
            <h3>Nenhum Root encontrado</h3>
            <p>Não há Roots correspondentes à sua busca.</p>
          </div>
        `;
        return;
      }
      
      roms.forEach((rom, index) => {
        const romCard = createRomCard(rom, index);
        container.appendChild(romCard);
      });
    }

    function createRomCard(rom, index) {
      const romCard = document.createElement('div');
      romCard.className = 'rom-card';
      
      const isFavorite = favorites.some(fav => fav.name === rom.name && fav.developer === rom.developer);
      
      romCard.innerHTML = `
        <div class="rom-content">
          <h3 class="rom-name">${rom.name}</h3>
          <span class="rom-version">${rom.version}</span>
          <p class="rom-description">${rom.description}</p>
          <div class="rom-details">
            <div class="rom-detail">
              <span class="material-icons">sd_card</span>
              <span>${rom.size}</span>
            </div>
            <div class="rom-detail">
              <span class="material-icons">calendar_today</span>
              <span>26/09/2025</span>
            </div>
            <div class="rom-detail">
              <span class="material-icons">update</span>
              <span>${rom.lastUpdate || 'N/A'}</span>
            </div>
            <div class="rom-detail">
              <span class="material-icons">person</span>
              <span>${rom.developer}</span>
            </div>
          </div>
        </div>
        <div class="rom-actions">
          <button class="favorite-button ${isFavorite ? 'active' : ''}" data-rom-name="${rom.name}" data-rom-dev="${rom.developer}">
            <span class="material-icons">${isFavorite ? 'favorite' : 'favorite_border'}</span>
          </button>
          <button class="download-button" data-rom-index="${index}">
            <span class="material-icons">download</span>
            Download
          </button>
        </div>
      `;
      
      setTimeout(() => {
        romCard.classList.add('show');
      }, index * 100);
      
      romCard.querySelector('.favorite-button').addEventListener('click', function() {
        const romName = this.getAttribute('data-rom-name');
        const romDev = this.getAttribute('data-rom-dev');
        toggleFavorite(romName, romDev);
      });
      
      romCard.querySelector('.download-button').addEventListener('click', function() {
        const romIndex = this.getAttribute('data-rom-index');
        const selectedRom = rom;
        showRomDetails(selectedRom);
        trackDownload(selectedRom.name);
      });
      
      return romCard;
    }

    function toggleFavorite(romName, romDev) {
      const index = favorites.findIndex(fav => fav.name === romName && fav.dev === romDev);
      
      if (index === -1) {
        const rom = allRoms.find(r => r.name === romName && r.developer === romDev);
        if (rom) {
          favorites.push({
            name: rom.name,
            developer: rom.developer,
            version: rom.version,
            description: rom.description,
            size: rom.size,
            date: rom.date,
            lastUpdate: rom.lastUpdate,
            url: rom.url,
            details: rom.details,
            source: rom.source
          });
          showNotification('Adicionado aos Favoritos', `${romName} foi adicionado aos seus favoritos.`);
        }
      } else {
        favorites.splice(index, 1);
        showNotification('Removido dos Favoritos', `${romName} foi removido dos seus favoritos.`);
      }
      
      saveFavorites();
      
      if (currentFilter === 'favorites') {
        applyFilter('favorites');
      } else {
        applyFilter(currentFilter);
      }
    }

    function applyFilter(filter) {
      currentFilter = filter;
      
      let filteredRoms = [];
      
      switch (filter) {
        case 'all':
          filteredRoms = allRoms;
          break;
        case 'favorites':
          filteredRoms = favorites;
          break;
        case 'developer':
          const developers = [...new Set(allRoms.map(rom => rom.developer).filter(dev => dev && dev.trim() !== ''))];
          filteredRoms = developers.map(dev => ({
            isDeveloperGroup: true,
            developer: dev,
            roms: allRoms.filter(rom => rom.developer === dev)
          }));
          break;
        case 'date':
          filteredRoms = [...allRoms].sort((a, b) => {
            const dateA = new Date(a.date.split('/').reverse().join('/'));
            const dateB = new Date(b.date.split('/').reverse().join('/'));
            return dateB - dateA;
          });
          break;
        default:
          filteredRoms = allRoms;
      }
      
      displayRoms(filteredRoms);
    }

    function filterRoms(searchTerm) {
      if (!searchTerm) {
        applyFilter(currentFilter);
        return;
      }
      
      let romsToFilter = currentFilter === 'favorites' ? favorites : allRoms;
      
      const filteredRoms = romsToFilter.filter(rom => {
        const term = searchTerm.toLowerCase();
        return (
          rom.name.toLowerCase().includes(term) ||
          rom.version.toLowerCase().includes(term) ||
          rom.description.toLowerCase().includes(term) ||
          rom.developer.toLowerCase().includes(term)
        );
      });
      
      displayRoms(filteredRoms);
    }

    function setViewMode(mode) {
      settings.viewMode = mode;
      saveSettings();
      
      if (mode === 'grid') {
        romCards.classList.remove('list-view');
        gridViewButton.classList.add('active');
        listViewButton.classList.remove('active');
      } else {
        romCards.classList.add('list-view');
        gridViewButton.classList.remove('active');
        listViewButton.classList.add('active');
      }
    }

    function showRomDetails(rom) {
      currentRom = rom;
      
      modalTitle.textContent = rom.name;
      
      document.getElementById('romVersion').textContent = rom.details.version;
      document.getElementById('romDeveloper').textContent = rom.details.dev;
      document.getElementById('romLastUpdate').textContent = rom.lastUpdate || 'N/A'; 
      document.getElementById('romDescription').textContent = rom.details.description;
      
      const changelogHtml = rom.details.changelog.map(item => `<li>${item}</li>`).join('');
      document.getElementById('changelog').innerHTML = changelogHtml || '<li>Nenhuma alteração recente</li>';
      
      document.getElementById('changelogSection').style.display = rom.details.changelog.length > 0 ? 'block' : 'none';
      
      const issuesHtml = rom.details.knownIssues.map(item => `<li>${item}</li>`).join('');
      document.getElementById('knownIssues').innerHTML = issuesHtml || '<li>Nenhum problema conhecido</li>';
      
      document.getElementById('knownIssuesSection').style.display = rom.details.knownIssues.length > 0 ? 'block' : 'none';
      
      const notesHtml = rom.details.notes.map(item => `<li>${item}</li>`).join('');
      document.getElementById('notes').innerHTML = notesHtml || '<li>Nenhuma nota adicional</li>';
      
      document.getElementById('notesSection').style.display = rom.details.notes.length > 0 ? 'block' : 'none';
      
      let sourceHtml = `<a href="${rom.source}" target="_blank" class="telegram-button"><span class="material-icons">send</span> Acessar</a>`;
      document.getElementById('sourceLink').innerHTML = sourceHtml;
      
      modalOverlay.classList.add('active');
    }

    function switchTab(tabName) {
      modalTabs.forEach(tab => {
        tab.classList.remove('active');
      });
      
      modalTabContents.forEach(content => {
        content.classList.remove('active');
      });
      
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    function closeModal() {
      modalOverlay.classList.remove('active');
      currentRom = null;
    }

    function confirmDownload() {
      if (currentRom && currentRom.url) {
        window.open(currentRom.url, '_blank');
        closeModal();
        
        if (settings.notificationsEnabled) {
          showNotification('Download Iniciado', `O download do Root ${currentRom.name} foi iniciado.`);
        }
      }
    }

    function trackDownload(romName) {
      const formData = new FormData();
      formData.append('dispositivo', navigator.userAgent);
      formData.append('root', romName);
      formData.append('mensagem', 'Entrou!');
      
      fetch('https://formspree.io/f/xblzjvwn', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log('Download tracked:', data);
      })
      .catch(error => {
        console.error('Error tracking download:', error);
      });
    }

    function toggleTheme() {
      settings.theme = settings.theme === 'light' ? 'dark' : 'light';
      applyTheme();
      saveSettings();
      
      localStorage.setItem('appTheme', settings.theme);
    }

    function applyTheme() {
      if (settings.theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggle.innerHTML = '<span class="material-icons">light_mode</span>';
      } else {
        document.documentElement.removeAttribute('data-theme');
        themeToggle.innerHTML = '<span class="material-icons">dark_mode</span>';
      }
    }

    function applyPrimaryColor() {
      document.documentElement.style.setProperty('--md-sys-color-primary', settings.primaryColor);
      
      const r = parseInt(settings.primaryColor.slice(1, 3), 16);
      const g = parseInt(settings.primaryColor.slice(3, 5), 16);
      const b = parseInt(settings.primaryColor.slice(5, 7), 16);
      
      const containerColor = `rgba(${r}, ${g}, ${b}, 0.2)`;
      document.documentElement.style.setProperty('--md-sys-color-primary-container', containerColor);
    }

    function showNotification(title, message) {
      if (!settings.notificationsEnabled) return;
      
      const titleElement = notification.querySelector('.notification-title');
      const messageElement = notification.querySelector('.notification-message');
      
      titleElement.textContent = title;
      messageElement.textContent = message;
      
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 5000);
    }

    function saveSettings() {
      localStorage.setItem('rootSettings', JSON.stringify(settings));
    }

    function loadSettings() {
      const savedSettings = localStorage.getItem('rootSettings');
      if (savedSettings) {
        settings = JSON.parse(savedSettings);
      }
      
      const sharedTheme = localStorage.getItem('appTheme');
      if (sharedTheme) {
        settings.theme = sharedTheme;
      }
      
      applyTheme();
      applyPrimaryColor();
      setViewMode(settings.viewMode);
    }

    function saveFavorites() {
      localStorage.setItem('rootFavorites', JSON.stringify(favorites));
    }

    function loadFavorites() {
      const savedFavorites = localStorage.getItem('rootFavorites');
      if (savedFavorites) {
        favorites = JSON.parse(savedFavorites);
      }
    }

    document.addEventListener('DOMContentLoaded', initializeApp);
  </script>
</body>
</html>